---
layout: post
title: 对C++类的整理(3)——继承 
date:   2019-05-23 22:04:00 +0800
#大类配置
categories: document
#小类配置
tag: C++
#网易云音乐，只能播放无版权保护的
music-id: 465675773
---

* content
{:toc}
# 基类和派生类

&emsp;&emsp;之前的类都是独立的类，而通过**继承**我们可以将类联系起来，构成一种层次关系。位于底层的叫**基类**，继承得到的类叫**派生类**。

## 定义派生类

&emsp;&emsp;派生类通过**基类名表**（类派生列表）指出它是从哪些基类派生而来的，其基本格式为：`[访问控制] 基类名1, [访问控制] 基类名2, ...`，访问控制和访问说明符一样，有三种：`private`、`protected`和`public`，省略的话，stuct默认为`public`，class默认为`private`，这是它们唯二的区别。

```c++
class Base;//基类

class Derived: Base{
    //成员
}
```



## 访问控制和继承

&emsp;&emsp;派生类的成员有两部分组成：自己的和继承的。自己的成员受访问说明符控制，而继承的那部分受 基类的访问说明符 和 基类名表的访问控制符 控制。具体如下：

1. 先看基类的访问说明符：
   * `private`：只能在基类中访问，派生类和（任何）外部无法访问
   * `protected`：能在基类、派生类中访问，（任何）外部无法访问
   * `public`：能在基类、派生类中访问，（基类）外部可以访问，（派生类）外部要看下面一部分
2. 再看继承时的访问控制符
   * `private`：继承的来的成员，除基类中的private部分外，全部属于派生类的`private`。（外部无法访问）
   * `protected`：继承的来的成员，除基类中的private部分外，全部属于派生类的`protected`。（外部无法访问）
   * `public`：继承的来的成员，除基类中的private部分外，基类中的protected部分属于派生类的`protected`，基类中的public部分属于派生类的`public`。

（注意，外部指的是类的用户）



&emsp;&emsp;派生类会继承基类中的以下部分：

* 基类中`private`、`protected`和`public`的**一般**数据成员和成员函数
* 虚函数

&emsp;&emsp;派生类不会继承基类的以下部分：

* 友元声明：友元声明永远只对做出声明的类有效
* 静态成员：静态成员在整个类体系中被共享



### 改变个别成员的访问性


&emsp;&emsp;特别的，我们可以单独地改变某些成员的访问控制，称为访问声明。格式为`基类名::成员`，比如：

```c++
class Base{
public:
    int a;
};

class Derived: private Base{
public:
    Base::a;//外部可以访问
    //也可以这样写 using Base::a;//见Primer 546
};
```

&emsp;&emsp;注意：

1. 访问声明不能带任何类型说明（数据成员），或参数和返回类型声明（成员函数）
2. 访问声明只能用于基类中的**非private部分**，基类的私有成员不能用访问声明
3. 访问声明不能降低基类成员的可访问性（这条有问题，但考试还是当它对）
4. 访问声明作用于所有同名函数（重载函数），因此，同名函数位于基类的不同访问域时，无法用访问声明
5. 若派生类中存在与基类名字相同的成员，则不能用访问声明

### 